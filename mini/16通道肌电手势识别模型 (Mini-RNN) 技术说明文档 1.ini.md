16通道肌电手势识别模型 (Mini-RNN) 技术说明文档 
1. 项目概述 
本模型是一个针对 16通道差分干电极肌电图 (EMG) 信号设计的轻量化深度学习模型。模型基于 Meta 的 generic_neuromotor 架构思想进行工程化精简，旨在嵌入式或移动端设备上实现极低延迟的实时手势识别。 
- 模型文件: mini_rnn_float32.tflite
- 输入规格: 16通道原始信号 + 16通道绝对值特征 (32-dim)
- 核心架构: 多尺度时域 CNN + Stateful GRU
- 计算精度: Float32 全精度 

---
2. 输入规格与预处理 
模型采用 双输入 结构以支持流式时序推断： 
2.1 信号输入层 (emg_combined) 
- 维度: [1, 50, 32] (Batch, Time, Channel)
- 时间跨度: 50 个采样点 (在 2000Hz 下对应 25ms 数据)
- 特征构成:
  - 通道 [0:16]: 原始 EMG 信号。需进行 Z-Score 标准化（均值=0，标准差参考下文）。
  - 通道 [16:32]: 对应 16 个通道的绝对值 (Abs)。用于提供信号的能量包络特征。 
2.2 状态输入层 (state_input) 
- 维度: [1, 128]
- 功能: 接收上一时刻推理输出的隐藏状态 (Hidden State)，实现跨窗口的“记忆”传递。 

---
3. 算子级推理流程解剖 
模型内部通过 5 个关键阶段完成从原始电压到手势概率的转化： 
第一阶段：空间映射 (Feature Projection) 
- 算子: ExpandDims -> Conv2D (1x1)
- 逻辑: 将 32 维原始特征映射到 64 维隐藏空间。
- 作用: 作为“电子调音台”，将 16 路 Raw 和 16 路 Abs 信号重新组合成更具辨识度的复合特征。 
第二阶段：多尺度时域感知 (Multi-Scale Inception) 
- 算子: 并行 Conv2D (Kernel Size: 3, 11, 21)
- 逻辑:
  - 短核 (3): 捕捉瞬时爆发特征（如点击瞬间）。
  - 中/长核 (11/21): 捕捉持续的肌肉收缩特征（如滑动过程）。
- 作用: 解决了干电极信号下动作快慢不一导致的识别失败，增强了时间尺度的鲁棒性。 
第三阶段：特征归一化 (Layer Normalization) 
- 算子组合: Mean -> SquaredDifference -> Rsqrt -> Mul -> Add
- 作用: 抗干扰核心。它将不同通道的特征拉回到统一的分布区间，有效抑制了因皮肤出汗或佩戴松紧导致的信号幅值剧烈波动。 
第四阶段：时序精炼 (Temporal Slicing) 
- 算子: StridedSlice -> Reshape -> Unpack
- 逻辑: 将卷积层输出的 25 个时间步降采样为 10 个核心快照，并拆解为单帧向量序列，准备喂给 RNN。 
第五阶段：循环神经网络核心 (Stateful GRU) 
- 算子: 展开的 FullyConnected + Logistic + Tanh
- 逻辑: 隐藏层维度为 128。通过更新门和重置门，模型根据当前的 10 个快照更新其“大脑记忆”。
- 输出: 产生新的 1x128 状态向量用于下一次迭代。 

---
4. 输出映射与后处理 
4.1 手势标签映射 (Gesture Labels) 
索引	标签 (Label)	物理动作
0 / 1	index_press / release	食指按下 / 抬起
2 / 3	middle_press / release	中指按下 / 抬起
4	thumb_click	拇指点击
5 / 8	thumb_down / up	拇指向下 / 向上滑动
6 / 7	thumb_in / out	拇指向内 / 向外滑动
4.2 部署建议 

状态反馈: 必须将每次输出的 1x128 向量保存，并在 10ms-20ms 后的下一次预测中传回输入端。
去抖动逻辑: 建议设置阈值 \(P>0.45\)，且在触发任一动作后进入 200ms 的保护期（Lockout）。
标准化参数: 输入前使用以下标准差（Std）进行缩放：[6.01, 5.86, 6.21, 7.27, 12.33, 11.99, 4.84, 5.31, 5.36, 6.68, 7.04, 8.03, 11.29, 14.08, 10.76, 7.95]
---
文档说明: 本文档基于模型算子逆向分析编写，适用于指导算法集成与硬件部署。